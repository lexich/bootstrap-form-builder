{% macro component %}
{% set name = "visualbinder" %}
{% set jsrender = {
  name: {
    value: "visualbinder",
    title: "Название"
  },
  notvisual:{
    type:"hidden",
    value:0
  },
  source:{
    title: "Источник",
    type: "select",
    data:{
      inject: { data:"loadIds" }
    }
  },
  target:{
    title:"Приемник",
    type: "select",
    data:{
      inject: { data:"loadIds" }
    }
  },
  type:{
    value:"visualbinder",
    type:"hidden"
  },
  action:{
    title: "Наименование события исходного элемента",
    value: "change",
    type: "select",
    data:[
      {id:"change",text:"Изменение"},
      {id:"click",text:"Клик"},
    ]
  },
  actions:{
    title: "Возможные действия",
    value: "",
    type: "select",
    data:{
      data: [
        {id:"enable",text:"Доступность"},
        {id:"visible",text:"Видимость"},
        {id:"visible_by_value", text: "Видимость по значению"}
      ],
      multiple:true
    }
  },
  defaultAction:{
    title: "",
    type: "checkbox",
    value: false
  }
} %}
<script type="text/template" data-ui-jsrender="{{ jsrender|json_encode }}" data-ui-jsrender-type="{{ name }}" data-ui-jsrender-img="img/components/visualbinder.png" data-title="Виз. коннектор" >
    <div style="width:65px;heigth:65px;overflow:hidden;display:block;">
      <img src="$STATIC_FOLDER$/img/visualbinder.png" alt="" style="width:30px;margin: 0 auto;"/>
      <p style="text-align:center">
        <%= name %>
      </p>
    </div>
    <object data-binder='{"source":"<%= source %>","target":"<%= target %>"' width="0" height="0"></object>
</script>
{% endmacro %}

{% macro modal %}
<script data-ui-jsrender-modal-template="visualbinder" type="text/template">
    <label for="__id_name">Название</label>
    <input id="__id_name" type="text" name="name">

    <label for="__id_source">Источник</label>
    <select name="source" id="__id_source" data-ui="select2" data-ui-data='{"inject":{"data":"loadIds"}}' />

    <label for="__id_target">Приемник</label>
    <select name="target" id="__id_target" data-ui="select2" data-ui-data='{"inject":{"data":"loadIds"}}' />
</script>
{% endmacro %}